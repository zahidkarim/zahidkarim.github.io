<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <title>Blog Title - Duck Typing</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href='http://fonts.googleapis.com/css?family=Oxygen:400,300,700'
  rel='stylesheet' type='text/css'>
  </head>
  <body>

    <div id="main" role="main">
      <nav>
  <ul>
    <li>
      <a class="blog-title" href="/">Zahid Jethani</a>
    </li>
  </ul>
</nav>

      <h3>Question:</h3>

<p><strong>Is explicit class checking ever absolutely necessary? Are their situations in which even if other options are available, checking the class of an object is still the best thing to do?</strong></p>

<h3>Response</h3>

<p>Explicitly checking the class of an object is not always necessary. It majorly depends on what the class is being used for and what possible objects will be passed in. The is no point creating verbose code that checks many cases unless they need to be handled separately.</p>

<h5>Example</h5>

<pre><code>class Media
    def initialize(file)
        return file.listen if file.respond_to?(:listen)
        return file.watch if file.respond_to?(:watch)
        return file.view if file.respond_to?(:view)
        raise StandardError
    end
end
</code></pre>

<p>Here you can check the class of an object responds to a certain method. This can test all the considered cases and raises an exception for the rest. Thus checking the class of some but not all.</p>

<h3>Question:</h3>

<p><strong>Name something weird that can happen when you write your contracts on the messages your objects respond to rather than what class of object they are.</strong></p>

<h3>Response</h3>

<p>The object could response <code>false</code> to a <code>response_to(:read)</code> method but can still run perfectly when called <code>objet.read --&gt; &quot;hello&quot;</code></p>

<h3>Questions</h3>

<p><strong>Try to identify some feature of Ruby that relies on duck typing either for its basic functionality or as an extension point meant to be customized by application programmers.</strong></p>

<h3>Example</h3>

<pre><code>class BoomBox
    def play(media)
        media.play
    end
end

class CD
    def play
    end
end

class Radio
    def play
    end
end

## IRB

BoomBox.play(CD.new)
BoomBox.play(Radio.new)
</code></pre>

<h3>Question</h3>

<p><strong>Share a bit of code which does explicit class comparison that you think would be very difficult to convert to a duck-typing style.</strong></p>

<h3>Example</h3>

<p>In our example above it would be less useful to use duck typing if we also had other classes that could respond to play but we didn&rsquo;t want it to be passed into the BoomBox. Essentially it doesn&rsquo;t restrict enough and to get around it we sometimes use verbose rescue statements for each case.</p>

<pre><code>## i.e
class Child
    def play
        self.swim
    end
end
BoomBox.play(Child.new)
    ## --&gt; Error -- Electrocution
</code></pre>

<h3>Question</h3>

<p><strong>Share a bit of code (either your own or from a OSS project you like) that you feel uses duck typing effectively.</strong></p>

<h3>Example</h3>

<pre><code>class GenericOrder
  def create(order)
    order.create
  end
end

class WholeLoan
  def create
    puts &#39;Creating WL Order&#39;
  end
end

class FractionalLoan
  def create
    puts &#39;Creating FL Order&#39;
  end
end

GenerateOrder.create(WholeLoan.new)
GenerateOrder.create(FractionalLoan.new)
</code></pre>

      <footer>
  <ul class="large-column">
    <li><h5 class="heading">Recent Articles</h5></li>
    <li>
      <ol>
          <li>
            <a href="/2015/09/14/null_is_something/">Null Is Something</a>
            <span>Sep 14</span>
          </li>
          <li>
            <a href="/2015/09/14/duck_typing/">Duck Typing</a>
            <span>Sep 14</span>
          </li>
          <li>
            <a href="/2015/09/08/module-mindset/">Module Mindset</a>
            <span>Sep  8</span>
          </li>
      </ol>
    </li>
  </ul>

  <ul class="small-column">
    <li><h5 class="heading">Tags</h5></li>
    <li>
      <ol>
      </ol>
    </li>
  <ul>
</footer>

    </div>

  </body>
</html>
